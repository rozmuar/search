# External Search Service

Сервис внешнего поиска для интернет-магазинов. Позволяет добавить быстрый и умный поиск на любой сайт через JavaScript виджет.

## Основные возможности

- 🔍 **Мгновенный поиск** — результаты по мере ввода
- 💡 **Умные подсказки** — автодополнение и исправление опечаток
- 📦 **Интеграция через фиды** — поддержка XML/JSON фидов
- ⚡ **Автообновление** — полный фид + быстрый фид остатков/цен
- 🎨 **Кастомизация** — настраиваемый виджет поиска

## Архитектура

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           КЛИЕНТСКИЙ САЙТ                                │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                    JavaScript Widget                              │    │
│  │  • Поисковая строка с подсказками                                │    │
│  │  • Отображение результатов                                       │    │
│  │  • Аналитика поисковых запросов                                  │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                           SEARCH API                                     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                   │
│  │   Search     │  │  Suggest     │  │   Admin      │                   │
│  │   Endpoint   │  │  Endpoint    │  │   API        │                   │
│  └──────────────┘  └──────────────┘  └──────────────┘                   │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        SEARCH ENGINE                                     │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                    Индекс поиска (Redis/Elasticsearch)            │   │
│  │  • Инвертированный индекс                                         │   │
│  │  • N-gram индекс для подсказок                                    │   │
│  │  • Индекс по категориям/атрибутам                                 │   │
│  └──────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                        FEED PROCESSOR                                    │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐          │
│  │  Full Feed      │  │  Delta Feed     │  │   Scheduler     │          │
│  │  Processor      │  │  (Price/Stock)  │  │                 │          │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘          │
└─────────────────────────────────────────────────────────────────────────┘
```

## Документация

- [Архитектура системы](docs/architecture.md)
- [Алгоритм поиска](docs/search-algorithm.md)
- [Обработка фидов](docs/feed-processing.md)
- [API документация](docs/api.md)
- [Интеграция виджета](docs/widget-integration.md)

## Структура проекта

```
search/
├── docs/                    # Документация
├── src/
│   ├── api/                 # REST API сервис
│   ├── indexer/             # Сервис индексации фидов
│   ├── search-engine/       # Поисковый движок
│   ├── scheduler/           # Планировщик обновлений
│   └── widget/              # JavaScript виджет
├── config/                  # Конфигурации
└── docker/                  # Docker файлы
```
